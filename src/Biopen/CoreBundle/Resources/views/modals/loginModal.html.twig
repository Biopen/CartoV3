<!-- Pop up message alerte-->
<div id="popup-login" class="modal">
  <div class="modal-content">

  	 <ul class="top-social">
         <li><a class="#" href="{{ hwi_oauth_login_url('facebook') }}">Se connecter avec Facebook</a></li>
         <li><a class="#" href="{{ hwi_oauth_login_url('gplus') }}">Se connecter avec Google</a></li>
      </ul>

          <form id="login-form" role="form" class="form-horizontal">

              <div class="form-group">
                  <label for="username" class="col-sm-4 control-label">{{ 'security.login.username'|trans({}, 'SonataUserBundle') }}</label>
                  <div class="col-sm-8"><input type="text" class="form-control" id="username" name="_username" required="required"/></div>
              </div>


              <div class="form-group control-group">
                  <label for="password" class="col-sm-4 control-label">{{ 'security.login.password'|trans({}, 'SonataUserBundle') }}</label>
                  <div class="col-sm-8"><input type="password" class="form-control" id="password" name="_password" required="required"/></div>
              </div>

              <div class="form-group">
                  <div class="col-sm-offset-4 col-sm-8">
                      <div class="checkbox control-group">
                          <label for="remember_me">
                              <input type="checkbox" id="remember_me" name="_remember_me" value="on"/>
                              {{ 'security.login.remember_me'|trans({}, 'FOSUserBundle') }}
                          </label>
                      </div>
                  </div>
              </div>

              <div class="form-group control-group">
                  <div class="controls col-sm-offset-4 col-sm-8">
                      <a href="{{ path('fos_user_resetting_request') }}">{{ 'forgotten_password'|trans({}, 'SonataUserBundle') }}</a>
                  </div>
              </div>

              <div class="form-group">
                  <div class="col-sm-offset-4 col-sm-8">
                      
                  </div>
              </div>
          </form>

          <button id="submit-login" class="btn btn-primary" onclick="submitAjaxLogin()">Connexion</button>
		      <a href="{{ path('fos_user_registration_register') }}">S'inscrire</a>
  </div>
   
</div>

<script>

function submitAjaxLogin()
{
  console.log("submit");
  $.ajax({
      method : 'post',
      url         : '{{ path("fos_user_security_check") }}',
      data        : $('#login-form').serialize(),
      dataType    : "json",
      success     : function(data, status, object) {
          console.log("success login",data);
          if (data.success)
          {
            $('#popup-login').closeModal();
          }
      },
      error: function(data, status, object){
          console.log(data.message);
      }
  });
}

// function submitAjaxRegister()
// {
//   console.log("submit register");
//   $.ajax({
//       method : 'post',
//       url         : '{{ path("fos_user_registration_register") }}',
//       data        : $('#register-form').serialize(),
//       dataType    : "json",
//       success     : function(data, status, object) {
//           console.log("success register",data);
//           if(data.error) $('.error').html(data.message);
//       },
//       error: function(data, status, object){
//           console.log(data.message);
//       }
//   });
// }
</script>