{% extends base_template %}

{% block title %}
    {% if admin.id(object) is not null %}
        {{ "title_edit"|trans({'%name%': admin.toString(object)|truncate(15) }, 'SonataAdminBundle') }}
    {% else %}
        {{ "title_create"|trans({}, 'SonataAdminBundle') }}
    {% endif %}
{% endblock %}

{% block navbar_title %}
    le titre
    {{ block('title') }}
{% endblock %}

{%- block actions -%}
		les bouttons
    {% include 'SonataAdminBundle:CRUD:action_buttons.html.twig' %}
{%- endblock -%}

{% block tab_menu %}{{ knp_menu_render(admin.sidemenu(action), {'currentClass' : 'active', 'template': sonata_admin.adminPool.getTemplate('tab_menu_template')}, 'twig') }}{% endblock %}

{% use '@BiopenAdmin/base_edit_form.html.twig' with form as parentForm %}
{% import "SonataAdminBundle:CRUD:base_edit_form_macro.html.twig" as form_helper %}
{% import 'SonataAdminBundle:CRUD:base_show_macro.html.twig' as show_helper %}

{% block form %}
	<div class="row">
		{# EDIT FORM #}
		<div class="col-md-6 col-sm-12">
	    {{ block('parentForm') }}
	  </div>

	  {# SHOW #}
	  <div class="col-md-6 col-sm-12">
	    <div class="sonata-ba-view">
	        {{ sonata_block_render_event('sonata.admin.show.top', { 'admin': admin, 'object': object }) }}

	        {% set has_tab = (admin.showtabs|length == 1 and admin.showtabs|keys[0] != 'default') or admin.showtabs|length > 1 %}

	        {% if has_tab %}
	            <div class="nav-tabs-custom">
	                <ul class="nav nav-tabs" role="tablist">
	                    {% for name, show_tab in admin.showtabs %}
	                        <li{% if loop.first %} class="active"{% endif %}>
	                            <a href="#tab_{{ admin.uniqid }}_{{ loop.index }}" data-toggle="tab">
	                                <i class="fa fa-exclamation-circle has-errors hide" aria-hidden="true"></i>
	                                {{ name|trans({}, show_tab.translation_domain ?: admin.translationDomain) }}
	                            </a>
	                        </li>
	                    {% endfor %}
	                </ul>

	                <div class="tab-content">
	                    {% for code, show_tab in admin.showtabs %}
	                        <div
	                                class="tab-pane fade{% if loop.first %} in active{% endif %}"
	                                id="tab_{{ admin.uniqid }}_{{ loop.index }}"
	                        >
	                            <div class="box-body  container-fluid">
	                                <div class="sonata-ba-collapsed-fields">
	                                    {% if show_tab.description != false %}
	                                        <p>{{ show_tab.description|raw }}</p>
	                                    {% endif %}

	                                    {{ show_helper.render_groups(admin, object, elements, show_tab.groups, has_tab) }}
	                                </div>
	                            </div>
	                        </div>
	                    {% endfor %}
	                </div>
	            </div>
	        {% elseif admin.showtabs is iterable %}
	            {{ show_helper.render_groups(admin, object, elements, admin.showtabs.default.groups, has_tab) }}
	        {% endif %}

	    </div>
	    {{ sonata_block_render_event('sonata.admin.show.bottom', { 'admin': admin, 'object': object }) }}
	  </div>
  </div>
{% endblock %}


