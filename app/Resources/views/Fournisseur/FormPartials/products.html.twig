<!-- SECTION PRODUITS -->
<section id="section_products">
	
	<h2 id="title_products">Produits du fournisseur</h2>

	<div class="row" id="mainProductDiv" style="display:none">
		<div class="input-field col s12">
	    <select id="mainProductSelection" name="mainProductSelection">
	   	   <option value=""  {% if not editMode %}disabled selected{% endif %}>Choisissez le produit principal</option>
	      {% for product in listProducts %}
	      	<option value="{{product.nameFormate}}" {% if editMode and product.nameFormate == provider.mainProduct %}selected{% endif %}>{{ product.name }}</option>
	      {% endfor %}
	    </select>
    	<label id="label_main_product_selection">Produit principal</label>
	  	</div>
	</div>


	<div class="row ">			
		{% for product in form.listeProducts %}
		    <div class="col s6 m4">	
		        {{ form_widget(product, {'attr': {'class': 'checkbox_products'}}) }}
		        {{ form_label(product) }} 
		    </div>
		{% endfor %}

		{# on compl?te avec des div vide le tableau de product #}
		<div class="col s{{ (form.listeProducts|length % 2)*6 }} m{{(3-(form.listeProducts|length % 3))*(form.listeProducts|length % 3)*4}}"></div>	
	</div>

	<!-- Espace pour préciser les type de products -->
	<div id="precisions">
		{# on cr?e un input textpour chaque products et on les cache tous
		quand on check un product on rend visible l'input correspondant #}
		{% for product in form.listeProducts %}			
			
			{% set descriptif = '' %}

			{# on cherche si ce produit est contenu dans le provider #}
			{% if editMode and provider is defined %}
				{% for providerProduct in provider.products %} 					
			        {% if product.vars.name == providerProduct.id %}
			        	{% set descriptif = providerProduct.descriptif %}
			        {% endif %}
		      {% endfor %}   
			{% endif %}

			<div class="input-field" id="div_precision_{{ product.vars.value }}" {% if not product.vars.checked %} style="display:none" {% endif %}>	
			  	<input placeholder="Précisez si nécessaire :" id="input_precision_{{ product.vars.value }}" name="precision_{{ product.vars.value }}" type="text" length="80" value='{{ descriptif }}'>
		      	<label class="active label_precision" for="input_precision_{{ product.vars.value }}">{{ product.vars.label }}</label>
			</div> 
		{% endfor %}   
	</div>

</section>
<div class="divider" id="divider_products"></div>