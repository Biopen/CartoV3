{% twig_js name="providerTemplate" %}
{# ------------- #}
{# INFO PROVIDER #}
{# ------------- #}
<li id="infoProvider-{{ provider.id }}" 
  class="providerItem" 
  data-provider-id="{{ provider.id }}">

  {# HEADER #}
  <div class="collapsible-header">
    
    <div class='collapsible-header-title row {{provider.mainProduct|lower}} {{provider.type}}'>    
      <span class="col s12 name ">
        <span class="iconMainProduct icon icon-{{provider.mainProduct|lower}} hideOnLargeScreen"></span>
        <span class="starNamesIcons">
          {% for starName in starNames %} 
              <span class="icon icon-{{starName}}"></span>
            {% endfor %}
        </span>   
           
        <span class="icon icon-close" id="btn-close-bandeau-detail"></span>
        {% if provider.distance != null %}
          <span class="right-align distance">~ {{ provider.distance }} km</span>
        {% endif %}  
        {{ provider.name|capitalize }}
      </span>
      
    </div>

    <div class='collapsible-header-more row'>
      <span class="description col s12">{{ provider.description|capitalize }}</span> 
      <span class="products col s8 hideOnLargeScreen">
         {% if provider.isProducteurOrAmap() or productsToDisplay.others.length == 0 %}
            {{ productsToDisplay.main.value|capitalize }} 
            {% if productsToDisplay.others.length != 0 %}, {% endif %}
         {% endif %}
         {% for product in productsToDisplay.others %} 
            {% set isDisabled = product.disabled ? 'disabled' : '' %}
            <span class="product {{isDisabled}}">{{ product.value|capitalize }} </span>
            {% if not loop.last %}, {% endif %}
        {% endfor %}
      </span>
      <span class="col s4 right-align btn-select-as-representant-container" style="display:none">
        <button class="btn btn-select-as-representant waves-effect waves-light" >Sélectionner</button> 
      </span>
      <span class="col s4 right-align starRespresentantLabel" style="display:none">Fournisseur principal</span>
      <a><span class="col s4 right-align moreInfos hideOnLargeScreen">Plus d'infos</span></a>
      <a><span class="col s4 right-align lessInfos hideOnLargeScreen" style="display:none">Moins d'infos</span></a>
    </div>

  </div>

  {# BODY #}
  <div class="collapsible-body moreDetails customScrollBar" > 
  
  {% if constellationMode %}
  <div class="menu-provider">      
    <center>
      <span class="menu-icon icon-directions tooltipped" 
      data-position="top" data-delay="0" data-tooltip="Itinéraire vers ce fournisseur"></span>
      <span class="menu-icon icon-edit tooltipped" 
      data-position="top" data-delay="0" data-tooltip="Modifier ces informations"></span>
      <span class="menu-icon icon-delete tooltipped" 
      data-position="top" data-delay="0" data-tooltip="Supprimer ce fournisseur"></span>
      {# <button id="" class="btn waves-effect waves-light">Modifier</button>
      <button id="" class="btn waves-effect waves-light">Supprimer</button> #}
    </center>       
  </div> 
  {% endif %}
  <div class="collapsible-body-main-content"> 
    <h3>Infos</h3>   
    <div class="section row sectionInfos">
      <span class="col s12 adresse">{{ provider.adresse|capitalize }}</span>
      <span class="col s12 tel">{{ provider.tel }}</span>
    </div>
    <div class="divider"></div>

    {% if provider.type != 'epicerie' %}
    <h3>Les produits</h3>   
    <div class="section sectionDetailProducts"> 
      {% for product in provider.products %} 
        {% set isDisabled = product.disabled ? 'disabled' : '' %}
        <div class='row {{ product.nameFormate }} {% if product.nameFormate == provider.mainProduct %}strong{% endif %}'>
          <span class="col s6 m4 product {{ isDisabled }}">
            <span class="icon icon-{{ product.nameFormate }} {{ isDisabled }}"></span>            
            <span class="productName">{{ product.nameShort|capitalize }}</span> 
          </span>
          <span class="col s6 m8 detail {{ isDisabled }}">{{ product.descriptif|capitalize }}</span>
        </div>
      {% endfor %}          

    </div>       
    <div class="divider"></div>
    {% endif %}

    <h3>Horaires</h3>   
    <div class="section row sectionHoraires">  
      {% set count = 0 %}        
      {% for key, horaire in provider.getFormatedHoraires() %} 
        {% if horaire != null %}
          <div class='row'>
            <span class="col s3 jour">{{ key|capitalize }}</span>
            <span class="col s9 horaires">{{ horaire }} </span>
          </div>
          {% set count = count + 1 %} 
        {% endif %}
      {% endfor %}  
      {% if count == 0 %}<div class='col'> Non renseignées </div>{% endif %} 
    </div> 
  </div>
  </div>

  

</li>

