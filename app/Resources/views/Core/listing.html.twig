{% extends "::bundle_layout.html.twig" %}

{% block title %}Navigation Libre{% endblock %}

{# Stylessheets #}
{% block stylesheets %}
<link href="https://fonts.googleapis.com/css?family=Yellowtail|Average+Sans" rel="stylesheet">
  <link rel="stylesheet" href="{{ asset('assets/img/icon/styles.css') }}">
  <link rel="stylesheet" href="{{ asset('assets/css/listing.css') }}"> 

{% endblock %}

{# BODY CONTENT #}
{% block body_content %}

<div id="div_map_and_products">
  
  {# La liste des products #}
  <section id="ProductsList" class="customScrollBar"> 
      {% include '::Core/section-products-listing.html.twig' %}    
  </section>
   
  {# La Carte et les infos element #} 
  <section id="section_carte">

    <div id="tooManyMarkers_modal">
        Trop de résulats à afficher ! 
        Zoomez ou Filtrez pour continuer
    </div> 

    {% include '::Components/modal-choose-adresse-for-directions.html.twig'  %}  
    {#  PRELOADER #}
    {% include '::Components/loader.html.twig'  %}

    <div id="map"> </div>

    {# <div id="directions-result-container">
        <span id="distance-value">9,6km</span>
        <span id="duration-value">13 minutes</span>
    </div> #}

    <section id="bandeau_detail" class="customScrollBar insideNavigationMode" style="display:none">
      
      <div id="detail_element">
      </div>      
      {% include '::Components/menu-element.html.twig'  %}
    </section>

    <div id="btn_menu"><i class='icon-menu'></i></div> 
    <div id="overlay"></div>
  </section>  

</div>

{% endblock %}

{% block javascripts %}

  <script>

    var iconDirectory = "{{ asset('assets/img/icon/') }}";
    var elementListJson = {{ elementList | serialize("json") | raw }}; 
    var constellationMode = false;
    var onlyInputAdressMode = false;

    var geocodeResponse = null;
    {% if geocodeResponse is defined %}
      geocodeResponse = {{ geocodeResponse | serialize("json") | raw }};
    {% endif %}

    

  </script>

  <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
  <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>
  
  <script src="{{ asset('js/libs.min.js') }}"></script>  
  <script src="{{ asset('js/constelisting.js') }}"></script>

    {% javascripts filter="twig_js" 

    '../app/Resources/views/Core/element.html.twig'    
    %}
      <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

   
    <script 
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBgah9u8A21CdN6O_fN80Op-4zcLJ0EwXk&libraries=places&callback=initMap">
    </script>

    <script src="https://www.google.com/recaptcha/api.js?onload=onloadCaptcha&render=explicit"
        async defer>
    </script>


{% endblock %}

{% block modals %} 

  {% include '::Components/delete-element.html.twig'  %}
  

{% endblock %}

